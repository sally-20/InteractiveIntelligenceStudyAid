<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock market basics</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/learningstyles.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <style>
        .quiz-container {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.5);
            max-width: 80%;
            max-height: 80%;
            overflow-y: auto;
        }
        .question-box {
            border: 1px solid #ddd;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 10px;
        }
        .options-box {
            display: flex;
            flex-direction: column;
        }
        .option-box {
            border: 1px solid #ddd;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            cursor: pointer;
        }
        .option-box.selected {
            background-color: #3498db;
            color: white;
        }
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 1);
            z-index: 999;
            display: none;
        }
        .modal-button-container button {
            width: 10rem;
            height: 2rem;
            background-color: #3498db;
            outline: none;
            border: 1px solid rgb(252, 242, 241);
            color: white;
            font-size: 1.1rem;
            cursor: pointer;
            border-radius: 20px;
            text-align: center;
            line-height: 2rem;
            padding: 5px;
        }
        .modal-button-container button:hover {
            background-color: #2980b9;
        }
        @keyframes fadeIn {
            from {opacity: 0;}
            to {opacity:1 ;}
        }
        @-webkit-keyframes fadeIn {
            from {opacity: 0;}
            to {opacity: 1;}
        }
        .completion-message {
            color: green; 
        } 
    </style>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="{{ url_for('static', filename='js/learningscript.js') }}" defer></script>
    <script>
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }
        const questions = [
            {
                question: "What is the purpose of a stock exchange?",
                options: [
                    "To issue shares of companies",
                    "To facilitate the trading of stocks",
                    "To provide loans to investors",
                    "To regulate the financial markets"
                ],
                answer: "To facilitate the trading of stocks"
            },
            {
                question: "Which are the major stock exchanges in India?",
                options: [
                    "National Stock Exchange (NSE) and Bombay Stock Exchange (BSE)",
                    "New York Stock Exchange (NYSE) and London Stock Exchange (LSE)",
                    "Tokyo Stock Exchange (TSE) and Shanghai Stock Exchange (SSE)",
                    "NASDAQ and London Stock Exchange (LSE)"
                ],
                answer: "National Stock Exchange (NSE) and Bombay Stock Exchange (BSE)"
            },
            {
                question: "How does trading take place in Indian stock exchanges?",
                options: [
                    "Through physical trading floors",
                    "Through online platforms",
                    "Through telephonic orders",
                    "Through postal mail"
                ],
                answer: "Through online platforms"
            },
            {
                question: "What does market capitalization indicate?",
                options: [
                    "The total value of a company's outstanding shares",
                    "The total revenue generated by a company",
                    "The total number of employees in a company",
                    "The total debt of a company"
                ],
                answer: "The total value of a company's outstanding shares"
            },
            {
                question: "What is liquidity in the stock market?",
                options: [
                    "The ease of buying or selling stocks",
                    "The total number of stocks issued by a company",
                    "The total number of buyers and sellers in the market",
                    "The total value of stocks traded in a day"
                ],
                answer: "The ease of buying or selling stocks"
            }
            {
                question: "What is the most common type of stock in the Indian market?",
                options: ["Preferred Stocks", "Growth Stocks", "Common Stocks", "Value Stocks"],
                answer: "Common Stocks"
            },
            {
                question: "Which type of stock provides a fixed dividend rate?",
                options: ["Preferred Stocks", "Growth Stocks", "Common Stocks", "Dividend Stocks"],
                answer: "Preferred Stocks"
            },
            {
                question: "Which type of stock is expected to grow at an above-average rate?",
                options: ["Preferred Stocks", "Growth Stocks", "Common Stocks", "Value Stocks"],
                answer: "Growth Stocks"
            },
            {
                question: "Which type of stock is considered undervalued by the market?",
                options: ["Preferred Stocks", "Growth Stocks", "Common Stocks", "Value Stocks"],
                answer: "Value Stocks"
            },
            {
                question: "Which type of stock provides a steady income stream through dividends?",
                options: ["Preferred Stocks", "Growth Stocks", "Common Stocks", "Dividend Stocks"],
                answer: "Dividend Stocks"
            }
            {
                question: "What is the main mechanism for determining stock prices in India?",
                options: ["Auction market system", "Fixed pricing system", "Negotiated pricing system", "Random pricing system"],
                answer: "Auction market system"
            },
            {
                question: "What factors can influence the price of a stock?",
                options: ["Supply and demand dynamics", "Company performance", "Market sentiment", "All of the above"],
                answer: "All of the above"
            },
            {
                question: "How are buy and sell orders matched in the auction market system?",
                options: ["Based on price and time priority", "Based on the quantity of shares", "Based on the company's performance", "Based on the market sentiment"],
                answer: "Based on price and time priority"
            },
            {
                question: "What determines the price at which a stock is traded?",
                options: ["The highest bid price", "The lowest ask price", "The average of bid and ask prices", "The closing price of the previous day"],
                answer: "The average of bid and ask prices"
            },
            {
                question: "Why can stock prices in India change rapidly throughout the trading day?",
                options: [
                    "New buy and sell orders are constantly submitted",
                    "The stock exchange matches orders based on price and time priority",
                    "Supply and demand dynamics are constantly changing",
                    "All of the above"
                ],
                answer: "All of the above"
            }
        ];

        const questionsCopy = [...questions];
        let currentQuestionIndex = 0;

        // Open quiz modal
        function openQuizModal() {
            document.getElementById('quiz-container').style.display = 'block';
            document.getElementById('overlay').style.display = 'block';
        }

        // Close quiz modal
        function closeQuizModal() {
            document.getElementById('quiz-container').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
        }

        // Shuffle and display questions
        function showRandomQuestion() {
            shuffleArray(questionsCopy);
            showQuestion(currentQuestionIndex);
        }

        // Call this function when starting the quiz
        function startQuiz() {
            currentQuestionIndex = 0;
            showRandomQuestion();
        }

        function showQuestion(index) {
            const quizBox = document.querySelector('.quiz-container');
            const currentQuestion = questionsCopy[index];
            // Clear previous content
            quizBox.innerHTML = '';
            if (currentQuestion) {
                const questionBox = document.createElement('div');
                questionBox.classList.add('question-box');
                questionBox.innerHTML = `
                    <div class="question">${currentQuestion.question}<br></div>
                    <div class="options-box">
                        ${currentQuestion.options.map((option, optionIndex) => `<div class="option-box" data-index="${optionIndex}">${option}</div>`).join('')}
                    </div>
                    <div id="result"></div>
                `;

                // Add event listeners to the options
                const optionBoxes = questionBox.querySelectorAll('.option-box');
                optionBoxes.forEach(optionBox => {
                    optionBox.addEventListener('click', function () {
                        const selectedOptionIndex = this.getAttribute('data-index');
                        checkAnswer(selectedOptionIndex, currentQuestion.answer);
                    });
                });
                quizBox.appendChild(questionBox);
                // Create a separate container for the button
                const buttonContainer = document.createElement('div');
                buttonContainer.classList.add('modal-button-container');
                buttonContainer.innerHTML = `<button onclick="showNextQuestion()">Next Question</button>`;
                // Append the button container to the quiz box
                quizBox.appendChild(buttonContainer);
            } else {
                quizBox.innerHTML = `
                    <div class="result">Quiz completed! Thanks for playing.</div>
                `;
                // Create a separate container for the button
                const buttonContainer = document.createElement('div');
                buttonContainer.classList.add('modal-button-container');
                buttonContainer.innerHTML = `<button onclick="closeQuizModal()">Close Quiz</button>`;
                // Append the button container to the quiz box
                quizBox.appendChild(buttonContainer);
            }
        }

        let score = 0;

        // Check user's answer and show next question
        function showNextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < 5) {
                showRandomQuestion();
            } else {
                evaluateAndDisplayResult();
            }
        }

        function checkAnswer(selectedOptionIndex, correctAnswer) {
            const options = document.querySelectorAll('.options-box .option-box');
            
            // Remove the 'selected' class from all options
            options.forEach(option => {
                option.classList.remove('selected');
            });
        
            // Add the 'selected' class to the clicked option
            options[selectedOptionIndex].classList.add('selected');
        
            // Get the selected option's text
            const selectedOptionText = options[selectedOptionIndex].innerText;
        
            // Check if the selected option is correct
            const isCorrect = selectedOptionText === correctAnswer;
        
            // Update the UI to indicate correctness
            const resultContainer = document.getElementById('result');
            resultContainer.innerHTML = isCorrect
                ? '<p style="color: green;">Correct!</p>'
                : `<p style="color: red;">Incorrect. The correct answer is: ${correctAnswer}</p>`;
        
            // Update the score if the answer is correct
            if (isCorrect) {
                score++;
            }
            
            // For demonstration purposes, let's log the selected option index and correctness
            console.log('Selected Option Index:', selectedOptionIndex);
            console.log('Is Correct:', isCorrect);
        }

        let quizCompleted = false;

        // Evaluate user's performance and display result
        function evaluateAndDisplayResult() {
            const resultContainer = document.getElementById('quiz-container');
            let correctAnswersCount = 0;
            let totalQuestions = 5;
            if (score >= 4) {
                quizCompleted = true;
                resultContainer.innerHTML = `
                <div class="result">Congratulations! You can move on to the next lesson.</div>
                <div class="score-details">
                    <p>Your Score <br> ${score} out of ${totalQuestions}</p>
                </div>
                <div class="modal-button-container">
                    <button onclick="closeQuizModal()">Close Quiz</button>
                </div>`;
                updateUIOnQuizCompletion();
                document.getElementById('completion-message').style.display = 'block';
            } else {
                resultContainer.innerHTML = `
                <div class="result">Please review the lesson again and try again later.</div>
                <div class="score-details">
                    <p><center>Your Score</center> <br> <center>${score} out of ${totalQuestions}</center></p>
                </div>
                <div class="modal-button-container">
                    <button onclick="closeQuizModal()">Close Quiz</button>
                </div>`;
            }
        }

        function closeQuizModal() {
            document.getElementById('quiz-container').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
    
            // Redirect to the Personal Finance page
            window.location.href = "{{ url_for('personalfinance') }}";
        }
        function updateUIOnQuizCompletion() {
            // Change the color of the flower to gold
            const flower = document.querySelector('.flower_head[data-target="dialog-boxpfitd10"]');
            if (flower) {
                flower.style.backgroundColor = '#ffd700'; // Hex code for gold

            // Change the dialog box border color to gold and display the completion message
            const dialogBoxPfitd10 = document.getElementById('dialog-boxpfitd10');
            if (dialogBoxPfitd10) {
                dialogBoxPfitd10.style.borderColor = '#ffd700'; // Hex code for gold
                const dialogText = dialogBoxPfitd10.querySelector('.dialog-text');
                dialogText.innerText = 'Completed'; // Update the message inside the dialog box

                // Save the completion status in localStorage
                localStorage.setItem('pfitdlsn10Completed', 'true');
            }
        }

        document.addEventListener('DOMContentLoaded', function () {
            startQuiz();
            const pfitdlsn10Completed = localStorage.getItem('pfitdlsn10Completed');
            if (pfitdlsn10Completed === 'true') {
                updateUIOnQuizCompletion();
            }
        });
    </script>
</head>

<body>
    <div class="container">
        <aside class="sidebar-left">
            <ul class="sidebar-menu">
                <li>
                    <h2 class="sidebar-title">Study Aid</h2>
                </li>
                <li class="sidebar-item">
                    <a href="#" class="colored-icon">
                        <i class="fas fa-graduation-cap"></i> Learn
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="#" class="courses-toggle">
                        <i class="fas fa-book"></i> Courses
                    </a>
                    <ul class="course-list hidden">
                        <li>
                            <a href="{{ url_for('algorithms') }}">
                                <i class="fas fa-chart-line"></i> Algorithms
                            </a>
                        </li>
                        <li>
                            <a href="{{ url_for('personalfinance') }}">
                                <i class="fas fa-rupee-sign"></i> Personal Finance
                            </a>
                        </li>
                        <li>
                            <a href="{{ url_for('calculus') }}">
                                <i class="fas fa-calculator"></i> Calculus
                            </a>
                        </li>
                    </ul>
                </li>
                <li class="sidebar-item">
                    <a href="{{ url_for('profile') }}" class="colored-icon">
                        <i class="fas fa-user"></i> Profile
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="{{ url_for('settings') }}" class="colored-icon">
                        <i class="fas fa-cog"></i> Settings
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="{{ url_for('home') }}" class="colored-icon">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </a>
                </li>
            </ul>
        </aside>
        <main class="lesson-main-content">
            <h1>Stock market basics</h1>
            <div id="sublesson1">
                <h2>Understanding Indian stock exchanges</h2>
                <p>
                    In this lesson, we will explore the basics of the Indian stock exchanges. Understanding how the stock market works is essential for anyone interested in investing in stocks. Let's dive into the key concepts related to Indian stock exchanges.<br>
                    <br>
                    1. What is a stock exchange?<br>
                    A stock exchange is a marketplace where buyers and sellers come together to trade stocks and other securities. It provides a platform for companies to raise capital by issuing shares and for investors to buy and sell those shares.<br>
                    <br>
                    2. What are the major stock exchanges in India?<br>
                    The two major stock exchanges in India are the National Stock Exchange (NSE) and the Bombay Stock Exchange (BSE). These exchanges facilitate the trading of stocks, derivatives, and other financial instruments.<br>
                    <br>
                    3. How does trading work in Indian stock exchanges?<br>
                    Trading in Indian stock exchanges takes place electronically. Buyers and sellers place their orders through brokers who are registered with the exchanges. The orders are matched based on price and time priority, and the trades are executed.<br>
                    <br>
                    4. What is market capitalization?<br>
                    Market capitalization refers to the total value of a company's outstanding shares. It is calculated by multiplying the current market price of a share by the total number of shares issued by the company. Market capitalization is an important indicator of a company's size and value.<br>
                    <br>
                    5. What is liquidity in the stock market?<br>
                    Liquidity refers to the ease with which a stock can be bought or sold without causing a significant change in its price. Higher liquidity means there are more buyers and sellers in the market, making it easier to execute trades. Liquidity is an important factor to consider when investing in stocks.                    
                </p>
            </div>    
            <!-- Sub Lesson 2 Content -->
            <div id="sublesson2">
                <h2>Types of stocks in the Indian market</h2>
                <p>
                    In this lesson, we will explore the basics of the stock market, specifically focusing on the types of stocks in the Indian market. Understanding the different types of stocks is crucial for investors as it helps them make informed decisions and manage their portfolios effectively.<br>
                    <br>
                    1. Common Stocks:<br>
                    Common stocks are the most common type of stocks that investors can buy in the Indian market. When you buy common stocks, you become a partial owner of the company. As a shareholder, you have the right to vote on important company matters and receive dividends if the company distributes profits. However, common stockholders are the last to receive any remaining assets if the company goes bankrupt.<br>
                    <br>
                    2. Preferred Stocks:<br>
                    Preferred stocks are another type of stocks available in the Indian market. Preferred stockholders have a higher claim on the company's assets and earnings compared to common stockholders. They receive dividends before common stockholders and have a fixed dividend rate. However, preferred stockholders usually do not have voting rights in the company.<br>
                    <br>
                    3. Growth Stocks:<br>
                    Growth stocks are stocks of companies that are expected to grow at an above-average rate compared to other companies in the market. These companies reinvest their earnings into the business to fuel expansion and increase their market share. Growth stocks can be a good choice for investors looking for capital appreciation over time.<br>
                    <br>
                    4. Value Stocks:<br>
                    Value stocks are stocks of companies that are considered undervalued by the market. These companies may have solid fundamentals but are currently trading at a lower price than their intrinsic value. Value investors look for these stocks with the expectation that the market will eventually recognize their true worth, leading to an increase in stock price.<br>
                    <br>
                    5. Dividend Stocks:<br>
                    Dividend stocks are stocks of companies that regularly distribute a portion of their profits to shareholders in the form of dividends. These stocks can provide a steady income stream for investors, especially those who are looking for regular cash flow. Dividend stocks are often preferred by income-oriented investors.                    
                </p>
            </div>
            <!-- Sub Lesson 3 Content -->
            <div id="sublesson3">
                <h2>How stock prices are determined in India</h2>
                <p>
                    In this lesson, we will explore how stock prices are determined in India. Understanding this process is crucial for anyone interested in investing in the stock market. Let's dive in!<br>
                    <br>
                    Stock prices in India are determined through a mechanism called the auction market system. This system brings together buyers and sellers in a centralized marketplace, where they can trade stocks. The two main stock exchanges in India are the National Stock Exchange (NSE) and the Bombay Stock Exchange (BSE).<br>
                    <br>
                    The price of a stock is influenced by various factors, including supply and demand dynamics, company performance, market sentiment, and economic conditions. When there is high demand for a particular stock, its price tends to rise. Conversely, when there is more supply than demand, the price may decline.<br>
                    <br>
                    The auction market system works based on the principle of matching buy and sell orders. Buyers and sellers submit their orders to the stock exchange, indicating the quantity of shares they want to buy or sell and the price at which they are willing to transact. The stock exchange then matches these orders based on price and time priority.<br>
                    <br>
                    The price at which a stock is traded is determined by the highest price a buyer is willing to pay (known as the bid price) and the lowest price a seller is willing to accept (known as the ask price). When the bid and ask prices match, a trade occurs, and the stock is transacted at that price.<br>
                    <br>
                    It's important to note that stock prices in India can change rapidly throughout the trading day. This is because new buy and sell orders are constantly being submitted to the stock exchange, which affects the supply and demand dynamics and, consequently, the stock prices.<br>
                    <br>
                    Now that we have a basic understanding of how stock prices are determined in India, let's test our knowledge with some multiple-choice questions.                    
                </p>
            </div>
            <center><button id="startQuizBtn" onclick="openQuizModal()">Take Quiz</button></center>
            <div id="quiz-container" class="quiz-container"></div>
            <div id="overlay" class="overlay"></div>
            <div id="completion-message" style="display: none;">
                <p class="completion-message">Lesson Completed!</p>
            </div>
        </main>
        <aside class="sidebar-right">
            <h2>Stock market basics</h2>
            <ul class="sub-lesson-links">
                <li><a href="#sublesson1">Understanding Indian stock exchanges</a></li>
                <li><a href="#sublesson2">Types of stocks in the Indian market</a></li>
                <li><a href="#sublesson3">How stock prices are determined in India</a></li>
            </ul>
        </aside>
</body>

</html>
